<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sample Home Page 2</title>
</head>
<body>
<!-- <element onload="myfunction_onload"> -->
<label for="fname">Enter Student First Name:</label>
<input type="text" id="fname" name="fname" value={{fn}}><br><br>
<label for="lname">Enter Student Last Name:</label>
<input type="text" id="lname" name="lname" value={{ln}}><br><br>
<label for="year">Enter Student's Year:</label>
<input type="number" id="year" value={{yr}}><br><br>
<label for="phone">Enter Student's Phone Number:</label>
<input type="text" id="phonenumber" name="phonenumber" value={{ph}}><br><br>
<label for="stars">Enter Student's Stars:</label>
<input type="number" id="stars" value={{st}}><br><br>
<input type="submit" onclick='changestudentinfo()' id="subbutton" value="Submit changes to student info">

<!-- <form action="{{ url_for('index') }}" method="POST"></form>
  just format this now! and do the feedback manipulation, feedback needs to be in a text box that can be edited

  </form> -->
  <p id="feedback"></p>
  <p id="weekshomeworknotdone"></p>
<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
<script>
  //get fb
  $("document").ready(function(){
    getstudentinfo();
  });

  function getstudentinfo(){
    var fn = document.getElementById("fname").value
    var ln = document.getElementById("lname").value
    var year = document.getElementById("year").value
          //works!
    $.post("/studentinfo", {fname: fn, lname: ln, yr: year}, success=function(response){
        feedback = ""
        for (var i = 0; i < response['feedback'].length; i++){
            feedback += response['feedback'][i][1] + " Feedback: " + response['feedback'][i][0] + "<br>";
        }
        //get the last week, then check the homework
        lastweek = response['feedback'][response['feedback'].length - 1][2]


        document.getElementById("feedback").innerHTML = feedback;
        document.getElementById("weekshomeworknotdone").innerHTML = "Weeks of Homework Not Done: " + lastweek;  
    });
  }

  function changestudentinfo(){
    var fn = document.getElementById("fname").value
    var ln = document.getElementById("lname").value
    var year = document.getElementById("year").value
    var phone = document.getElementById("phonenumber").value
    var stars = document.getElementById("stars").value
    $.post("/changestudentinfo", {fname: fn, lname: ln, yr: year, ph: phone, st: stars}, success=function(response){
        //do something here. i think just override. works for now.
    });
  }

</script>

</body>